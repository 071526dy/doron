# Doron システム 環境構築マニュアル

このマニュアルでは、システムをゼロから稼働させるための手順を解説します。

## 1. LINE Developers での準備

1.  [LINE Developers Console](https://developers.line.biz/console/) にログインします。
2.  **「プロバイダー」**を作成します（名前は任意。例: `MyProject`）。
3.  そのプロバイダー内に以下の2つの「チャネル」を作成します。

### ① Messaging API チャネル（Bot用）
- **作成方法**: 「新規チャネル作成」→「Messaging API」を選択。
- **自動作成**: これを作成すると、自動的に「LINE公式アカウント」が一つ作成されます。
- **設定**:
    - 「Messaging API設定」タブで **「チャネルアクセストークン（長期）」** を発行し、メモします。
    - 同じタブの **「LINE公式アカウント機能」** で「応答メッセージ」を「オフ」に、「ブラウザで開く」設定を調整します。

### ② LINE ログイン チャネル（設定画面の認証用）
- **作成方法**: 「新規チャネル作成」→「LINEログイン」を選択。
- **設定**:
    - 「チャネル基本設定」タブにある **「チャネルID」** と **「チャネルシークレット」** をメモします。

---

## 2. Google Apps Script (GAS) の設定

1.  [Google Apps Script](https://script.google.com/) で「新しいプロジェクト」を作成します。
2.  こちらの環境にある全ての `.gs` ファイルと `index.html` の中身を、GASエディタにコピー＆ペーストします。
3.  **「デプロイ」** → **「新しいデプロイ」** を選択。
    - 種類の選択: **「ウェブアプリ」**
    - 次のユーザーとして実行: **「自分」**
    - アクセスできるユーザー: **「全員」**
4.  発行された **「ウェブアプリのURL」** をメモします。

---

## 3. IDとURLの紐付け（最終設定）

1.  **LINE側にURLを登録**:
    - Messaging API設定の **「Webhook URL」** に、GASのウェブアプリURLを貼り付け、「Webhookの利用」をオンにします。
    - LINEログイン設定の **「LINEログイン設定」** タブにある **「コールバックURL」** にも、同じGASのURLを貼り付けます。
2.  **設定画面からログイン**:
    - GASのウェブアプリURLをブラウザで開きます。
    - 最下部の「Advanced Setting（詳細設定）」を開き、メモしておいた「アクセストークン」「チャネルID」「チャネルシークレット」を入力して保存します。
    - ページ上部の「LINE連携」ボタンを押し、自分のアカウントでログインすれば完了です。

---

## 4. 動作確認
あとは `TESTING.md` の手順に従ってテストを行ってください！
